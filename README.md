
---

# ç›®å½•

1. [Cè¯­è¨€æ•°ç»„ä¸ŽæŒ‡é’ˆåœ°å€ä½“ç³»æ€»ç»“](#cè¯­è¨€æ•°ç»„ä¸ŽæŒ‡é’ˆåœ°å€ä½“ç³»æ€»ç»“)

   1. [åŸºç¡€æ¦‚å¿µ](#1-åŸºç¡€æ¦‚å¿µ)
   2. [å­˜å‚¨ä½ç½®](#2-å­˜å‚¨ä½ç½®)
   3. [ä¸€ç»´æ•°ç»„ç¤ºä¾‹](#3-ä¸€ç»´æ•°ç»„ç¤ºä¾‹)
   4. [äºŒç»´æ•°ç»„ç¤ºä¾‹](#4-äºŒç»´æ•°ç»„ç¤ºä¾‹)
   5. [ä¸‰ç»´åŠé«˜ç»´æ•°ç»„ç¤ºä¾‹](#5-ä¸‰ç»´åŠé«˜ç»´æ•°ç»„ç¤ºä¾‹)
   6. [æ•°ç»„åœ°å€ä¸Žç±»åž‹å…³ç³»æ€»ç»“](#6-æ•°ç»„åœ°å€ä¸Žç±»åž‹å…³ç³»æ€»ç»“)
   7. [ç¤ºæ„æ€»ç»“æ–‡å­—ç‰ˆ](#7-ç¤ºæ„æ€»ç»“æ–‡å­—ç‰ˆ)
2. [å‡½æ•°æŒ‡é’ˆå­¦ä¹ æ•´ç†](#å‡½æ•°æŒ‡é’ˆå­¦ä¹ æ•´ç†)

   1. [åŸºç¡€æ¦‚å¿µ](#1-å‡½æ•°æŒ‡é’ˆ-åŸºç¡€æ¦‚å¿µ)
   2. [å‡½æ•°æŒ‡é’ˆçš„æ ¸å¿ƒä»·å€¼](#2-å‡½æ•°æŒ‡é’ˆ-æ ¸å¿ƒä»·å€¼)
   3. [åº”ç”¨ç¤ºä¾‹ä¸Žè¯´æ˜Ž](#3-åº”ç”¨ç¤ºä¾‹ä¸Žè¯´æ˜Ž)

      1. [å›žè°ƒå‡½æ•°Callback](#31-å›žè°ƒå‡½æ•°callback)
      2. [å‡½æ•°æ•°ç»„-èœå•è°ƒç”¨](#32-å‡½æ•°æ•°ç»„-èœå•è°ƒç”¨)
      3. [çŠ¶æ€æœºState-Machine](#33-çŠ¶æ€æœºstate-machine)
      4. [ç»“æž„ä½“-å‡½æ•°æŒ‡é’ˆ-æ¨¡æ‹Ÿè™šå‡½æ•°](#34-ç»“æž„ä½“-å‡½æ•°æŒ‡é’ˆ-æ¨¡æ‹Ÿè™šå‡½æ•°)
   4. [æ‹“å±•åœºæ™¯](#4-æ‹“å±•åœºæ™¯)
   5. [æ€»ç»“](#5-å‡½æ•°æŒ‡é’ˆ-æ€»ç»“)

---

# Cè¯­è¨€æ•°ç»„ä¸ŽæŒ‡é’ˆåœ°å€ä½“ç³»æ€»ç»“

## 1-åŸºç¡€æ¦‚å¿µ

* æ•°ç»„ååœ¨è¡¨è¾¾å¼ä¸­é€šå¸¸ä¼šè¡°å‡ä¸ºé¦–å…ƒç´ æŒ‡é’ˆ

  * ç‰¹ä¾‹ï¼š`sizeof(arr)`ã€`&arr` ä¸ä¼šè¡°å‡
* `&å˜é‡` è¡¨ç¤ºå˜é‡åœ°å€
* `&æ•°ç»„å` è¡¨ç¤ºæ•´ä¸ªæ•°ç»„åœ°å€ï¼Œç±»åž‹ä¸åŒäºŽé¦–å…ƒç´ æŒ‡é’ˆ

---

## 2-å­˜å‚¨ä½ç½®

| ç±»åž‹                 | å­˜å‚¨ä½ç½®   | ç¤ºä¾‹                                    |
| ------------------ | ------ | ------------------------------------- |
| å±€éƒ¨å˜é‡ / å±€éƒ¨æ•°ç»„        | æ ˆåŒº     | `int a; int arr[3];`                  |
| å…¨å±€å˜é‡ / é™æ€å˜é‡ / é™æ€æ•°ç»„ | å…¨å±€/é™æ€åŒº | `static int arr[3]; int arr[3];`ï¼ˆå‡½æ•°å¤–ï¼‰ |
| åŠ¨æ€åˆ†é…æ•°ç»„             | å †åŒº     | `malloc()` / `new`                    |

---

## 3-ä¸€ç»´æ•°ç»„ç¤ºä¾‹

```c
int arr[3] = {1,2,3};
```

| è¡¨è¾¾å¼       | ç±»åž‹           | å«ä¹‰           |
| --------- | ------------ | ------------ |
| `arr`     | `int (*)[3]` | æ•°ç»„åï¼Œè¡°å‡ä¸ºé¦–å…ƒç´ åœ°å€ |
| `&arr[0]` | `int*`       | é¦–å…ƒç´ åœ°å€        |
| `&arr`    | `int (*)[3]` | æŒ‡å‘æ•´ä¸ªæ•°ç»„       |
| `arr + i` | `int*`       | ç¬¬ i ä¸ªå…ƒç´ åœ°å€    |
| `&arr[i]` | `int*`       | ç¬¬ i ä¸ªå…ƒç´ åœ°å€    |

* æŒ‡é’ˆå­˜å‚¨ç¤ºä¾‹ï¼š

```c
int *p = arr;       // æŒ‡å‘é¦–å…ƒç´ 
int (*q)[3] = &arr; // æŒ‡å‘æ•´ä¸ªæ•°ç»„
```

---

## 4-äºŒç»´æ•°ç»„ç¤ºä¾‹

```c
int arr[2][3] = {{1,2,3},{4,5,6}};
```

| è¡¨è¾¾å¼          | ç±»åž‹              | å«ä¹‰                  |
| ------------ | --------------- | ------------------- |
| `arr`        | `int (*)[3]`    | æŒ‡å‘ç¬¬ä¸€è¡Œ               |
| `&arr`       | `int (*)[2][3]` | æŒ‡å‘æ•´ä¸ªäºŒç»´æ•°ç»„ï¼ˆ2Ã—3ï¼‰       |
| `arr[0]`     | `int*`          | æŒ‡å‘ç¬¬ä¸€è¡Œé¦–å…ƒç´             |
| `&arr[0][0]` | `int*`          | æŒ‡å‘ç¬¬ä¸€ä¸ªå…ƒç´              |
| `&arr[1][2]` | `int*`          | æŒ‡å‘æœ€åŽä¸€ä¸ªå…ƒç´             |
| `&arr[2][3]` | `int*`          | æŒ‡å‘äºŒç»´æ•°ç»„æœ€åŽå…ƒç´ ä¹‹åŽï¼ˆä¸å¯è§£å¼•ç”¨ï¼‰ |

* æŒ‡é’ˆå­˜å‚¨ç¤ºä¾‹ï¼š

```c
int (*p)[3] = arr;      // æŒ‡å‘ç¬¬ä¸€è¡Œ
int (*q)[2][3] = &arr;  // æŒ‡å‘æ•´ä¸ªäºŒç»´æ•°ç»„
int *r = &arr[0][0];    // æŒ‡å‘ç¬¬ä¸€ä¸ªå…ƒç´ 
```

---

## 5-ä¸‰ç»´åŠé«˜ç»´æ•°ç»„ç¤ºä¾‹

```c
int arr[2][3][4];
```

| è¡¨è¾¾å¼             | ç±»åž‹              | å«ä¹‰      |
| --------------- | --------------- | ------- |
| `arr`           | `int (*)[3][4]` | æŒ‡å‘ç¬¬ä¸€äºŒç»´å— |
| `arr[0]`        | `int (*)[4]`    | æŒ‡å‘ç¬¬ä¸€è¡Œ   |
| `arr[0][0]`     | `int*`          | æŒ‡å‘é¦–å…ƒç´    |
| `&arr[1][2][3]` | `int*`          | æŒ‡å‘æœ€åŽå…ƒç´   |

* å¤šç»´æ•°ç»„è¿žç»­å­˜å‚¨ï¼ŒæŒ‰ **è¡Œä¼˜å…ˆï¼ˆRow-majorï¼‰** é¡ºåºæŽ’åˆ—

---

## 6-æ•°ç»„åœ°å€ä¸Žç±»åž‹å…³ç³»æ€»ç»“

| è¡¨è¾¾å¼          | ç±»åž‹                                     |
| ------------ | -------------------------------------- |
| `arr`        | é¦–å…ƒç´ ï¼Œ`int*`ï¼ˆä¸€ç»´ï¼‰ / `int (*)[N]`ï¼ˆäºŒç»´åŠä»¥ä¸Šï¼‰   |
| `&arr`       | æ•´ä¸ªæ•°ç»„ï¼Œ`int (*)[N]` / `int (*)[X][Y]` â€¦  |
| `arr[i]`     | ç¬¬ i ä¸ªå…ƒç´ /è¡Œï¼Œ`int*` / `int (*)[N]`ï¼ˆä¸‰ç»´åŠä»¥ä¸Šï¼‰ |
| `&arr[i]`    | ç¬¬ i ä¸ªå…ƒç´ /è¡Œåœ°å€ï¼Œ`int*` / `int (*)[N]`      |
| `&arr[i][j]` | ç¬¬ i è¡Œç¬¬ j ä¸ªå…ƒç´ ï¼Œ`int*`                    |

* æ€»ç»“è§„åˆ™ï¼š

  1. æ•°ç»„ååœ¨è¡¨è¾¾å¼ä¸­è¡°å‡ä¸ºé¦–å…ƒç´ æŒ‡é’ˆï¼Œç±»åž‹éšç»´åº¦å˜åŒ–
  2. `&æ•°ç»„å` è¡¨ç¤ºæ•´ä¸ªæ•°ç»„åœ°å€ï¼Œç±»åž‹ä¸ºæŒ‡å‘æ•´ä¸ªæ•°ç»„çš„æŒ‡é’ˆ
  3. å¤šç»´æ•°ç»„è¿žç»­å­˜å‚¨ï¼ŒæŒ‰è¡Œä¼˜å…ˆ
  4. æŒ‡é’ˆå­˜å‚¨è§„åˆ™ï¼š

     * ä¸€ç»´æ•°ç»„ â†’ `int*` æˆ– `int (*)[N]`
     * äºŒç»´æ•°ç»„ â†’ `int*` / `int (*)[N]` / `int (*)[M][N]`
     * ä¸‰ç»´åŠä»¥ä¸Š â†’ `int*` / æŒ‡å‘å¯¹åº”ç»´åº¦æ•°ç»„çš„æŒ‡é’ˆ

---

## 7-ç¤ºæ„æ€»ç»“æ–‡å­—ç‰ˆ

* ä¸€ç»´æ•°ç»„ï¼š`arr â†’ &arr[0] â†’ arr[0]`

* äºŒç»´æ•°ç»„ï¼š`arr â†’ arr[0] â†’ &arr[0][0]`ï¼Œ`&arr â†’ æ•´ä¸ªäºŒç»´æ•°ç»„åœ°å€`

* ä¸‰ç»´æ•°ç»„ï¼š`arr â†’ arr[0] â†’ arr[0][0] â†’ &arr[0][0][0]`ï¼Œ`&arr â†’ æ•´ä¸ªä¸‰ç»´æ•°ç»„åœ°å€`

* æ ¸å¿ƒæ€æƒ³ï¼šæ•°ç»„åè¡°å‡åˆ°é¦–å…ƒç´ æŒ‡é’ˆï¼Œä½† `&æ•°ç»„å` æ°¸è¿œæŒ‡å‘æ•´ä¸ªæ•°ç»„ï¼Œç±»åž‹éšç»´åº¦é€’å¢ž

---
# -_-
å­¦ä¹ åµŒå…¥å¼çš„ä¸€äº›é—®ç­”è®°å½•
çŽ°åœ¨æˆ‘å­¦ä¼šäº†å˜é‡å’ŒæŒ‡é’ˆï¼Œä¸€ç»´æ•°ç»„å’ŒäºŒç»´æ•°ç»„çš„æŒ‡é’ˆï¼ŒçŽ°åœ¨æˆ‘èƒ½å­¦å‡½æ•°æŒ‡é’ˆå—ï¼Ÿ

å¯ä»¥çš„ ðŸ‘
ä½ çŽ°åœ¨å·²ç»å­¦ä¼šäº†å˜é‡ã€æŒ‡é’ˆå’Œæ•°ç»„çš„æŒ‡é’ˆï¼Œå…¶å®žè¿™äº›éƒ½æ˜¯ ç†è§£å‡½æ•°æŒ‡é’ˆçš„åŸºç¡€ã€‚

PS:å¯¹æˆ‘è€Œè¨€ï¼Œå‡½æ•°æŒ‡é’ˆå°±æ˜¯å°†åŽŸæ¥éœ€è¦ä¸€ä¸ªä¸ªis-elseæ¥åšåˆ¤æ–­åšé€‰æ‹©çš„äº‹æƒ…ï¼Œå˜æˆäº†åƒæ•°ç»„ä¸€æ ·ï¼Œé€šè¿‡åœ°å€ï¼ˆä¸‹æ ‡ï¼‰ç›´æŽ¥è°ƒç”¨ï¼ŒçœåŽ»äº†åšåˆ¤æ–­çš„åŠŸå¤«ï¼Œä¿®æ”¹èµ·æ¥ä»£ç é‡æ›´å°‘ï¼Œç†è§£ä¹‹åŽä¹Ÿæ›´ç›´è§‚ï¼Œæœ¬è´¨å°±æ˜¯å¯¹if-elseçš„ç®€åŒ–

# å‡½æ•°æŒ‡é’ˆå­¦ä¹ æ•´ç†

## 1-å‡½æ•°æŒ‡é’ˆ-åŸºç¡€æ¦‚å¿µ

* å‡½æ•°æŒ‡é’ˆå°±æ˜¯å­˜å‚¨å‡½æ•°åœ°å€çš„æŒ‡é’ˆ
* å†™æ³•ç¤ºä¾‹ï¼š

```c
int (*fp)(int,int);   // æŒ‡å‘è¿”å›ž intã€å‚æ•°ä¸º (int,int) çš„å‡½æ•°
fp = add;             // æŒ‡å‘å‡½æ•° add
int result = fp(2,3); // è°ƒç”¨å‡½æ•°
```

* å‡½æ•°åæœ¬èº«å°±æ˜¯åœ°å€ï¼š`add == &add`
* æ•°ç»„åä¸Žå‡½æ•°åä¸åŒï¼š

  * `arr == &arr[0]` ï¼ˆæ•°ç»„åé€€åŒ–ä¸ºé¦–å…ƒç´ æŒ‡é’ˆï¼‰
  * `&arr` æ˜¯æ•´ä¸ªæ•°ç»„åœ°å€ï¼Œç±»åž‹ä¸åŒ

---

## 2-å‡½æ•°æŒ‡é’ˆ-æ ¸å¿ƒä»·å€¼

> æŠŠå‡½æ•°å½“ä½œæ•°æ®ä¼ é€’ï¼Œä½¿ç¨‹åºæ›´çµæ´»ã€å¯æ‰©å±•ã€å¯å¤ç”¨

* ä¸»è¦ç”¨é€”ï¼š

  1. å›žè°ƒå‡½æ•°ï¼ˆCallbackï¼‰
  2. å‡½æ•°æ•°ç»„ / èœå•è°ƒç”¨
  3. çŠ¶æ€æœºï¼ˆState Machineï¼‰
  4. ç»“æž„ä½“ + å‡½æ•°æŒ‡é’ˆ â†’ æ¨¡æ‹Ÿè™šå‡½æ•° / å¤šæ€
  5. æ‹“å±•åœºæ™¯ï¼šæ’ä»¶æœºåˆ¶ã€äº‹ä»¶é©±åŠ¨ã€ç®—æ³•å¯æ›¿æ¢ã€ä»»åŠ¡è°ƒåº¦

---

## 3-åº”ç”¨ç¤ºä¾‹ä¸Žè¯´æ˜Ž

### 3-1-å›žè°ƒå‡½æ•°callback

* æ¦‚å¿µï¼šæŠŠè¡Œä¸ºä¼ ç»™å¦ä¸€ä¸ªå‡½æ•°ï¼Œè®©å®ƒåœ¨å†…éƒ¨è°ƒç”¨
* ç¤ºä¾‹ï¼šæŽ’åºå‡½æ•°ä¸­ä¼ å…¥ä¸åŒæ¯”è¾ƒè§„åˆ™

```c
int cmp_asc(int a,int b){ return a > b; }
int cmp_desc(int a,int b){ return a < b; }

void bubble_sort(int arr[], int n, int (*cmp)(int,int)){
    for(int i=0;i<n-1;i++){
        for(int j=0;j<n-1-i;j++){
            if(cmp(arr[j],arr[j+1])){
                int t=arr[j]; arr[j]=arr[j+1]; arr[j+1]=t;
            }
        }
    }
}
```

* ä¼˜ç‚¹ï¼š

  * åŠ¨æ€ä¼ é€’è¡Œä¸º
  * å‡å°‘é‡å¤ä»£ç 
  * æé«˜çµæ´»æ€§
* ä¸ç”¨å‡½æ•°æŒ‡é’ˆçš„æ›¿ä»£æ–¹æ³•ï¼š

```c
void bubble_sort(int arr[], int n, const char* order) {
    for(int i=0;i<n-1;i++){
        for(int j=0;j<n-1-i;j++){
            if((strcmp(order,"asc")==0 && arr[j]>arr[j+1]) ||
               (strcmp(order,"desc")==0 && arr[j]<arr[j+1])){
                int t=arr[j]; arr[j]=arr[j+1]; arr[j+1]=t;
            }
        }
    }
}
```

* ä¼˜ç‚¹ï¼šç®€å•ï¼Œæ˜“ç†è§£
* ç¼ºç‚¹ï¼šåˆ¤æ–­å¼€é”€ã€æ‰©å±•æ€§å·®

---

### 3-2-å‡½æ•°æ•°ç»„-èœå•è°ƒç”¨

* æ¦‚å¿µï¼šæŠŠå¤šä¸ªå‡½æ•°åœ°å€å­˜å…¥æ•°ç»„ï¼Œæ ¹æ®ç´¢å¼•è°ƒç”¨

```c
void say_hello() { printf("Hello!\n"); }
void say_bye()   { printf("Bye!\n"); }

void (*actions[2])() = {say_hello, say_bye};

int choice;
scanf("%d",&choice);
if(choice>=0 && choice<2) actions[choice]();
```

* ä¼˜ç‚¹ï¼š

  * å‡å°‘ if/else æˆ– switch
  * æ‰©å±•åŠŸèƒ½ç®€å•

* è¡Œä¸ºå¯åŠ¨æ€é€‰æ‹©

* ä¸ç”¨å‡½æ•°æŒ‡é’ˆçš„æ›¿ä»£æ–¹æ³•ï¼š

```c
if(choice==0) say_hello();
else if(choice==1) say_bye();
```

* ä¼˜ç‚¹ï¼šç®€å•ç›´æŽ¥
* ç¼ºç‚¹ï¼šåˆ†æ”¯å¤šæ—¶ä¸æ˜“æ‰©å±•ï¼Œå¯è¯»æ€§å·®

---

### 3-3-çŠ¶æ€æœºstate-machine

* æ¦‚å¿µï¼šæ¯ä¸ªçŠ¶æ€å¯¹åº”ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆ

```c
void red()    { printf("çº¢ç¯äº®\n"); }
void green()  { printf("ç»¿ç¯äº®\n"); }
void yellow() { printf("é»„ç¯äº®\n"); }

void (*state)() = red;
state();       // çº¢ç¯
state = green;
state();       // ç»¿ç¯
```

* ä¼˜ç‚¹ï¼š

  * çŠ¶æ€åˆ‡æ¢ç›´è§‚
  * å‡å°‘æ¡ä»¶åˆ¤æ–­
  * æ˜“æ‰©å±•
* ä¸ç”¨å‡½æ•°æŒ‡é’ˆçš„æ›¿ä»£æ–¹æ³•ï¼š

```c
if(state==RED) red();
else if(state==GREEN) green();
else if(state==YELLOW) yellow();
```

---

### 3-4-ç»“æž„ä½“-å‡½æ•°æŒ‡é’ˆ-æ¨¡æ‹Ÿè™šå‡½æ•°

```c
typedef struct { void (*speak)(); } Animal;
void dog_speak() { printf("æ±ªæ±ªæ±ª\n"); }
void cat_speak() { printf("å–µå–µå–µ\n"); }

Animal dog = {dog_speak};
Animal cat = {cat_speak};

dog.speak();
cat.speak();
```

* ä¼˜ç‚¹ï¼š

  * å®žçŽ°å¤šæ€
  * ç»Ÿä¸€æŽ¥å£ï¼Œä¸åŒå®žçŽ°
  * æ–¹ä¾¿å¤§åž‹å·¥ç¨‹æ‰©å±•
* ä¸ç”¨å‡½æ•°æŒ‡é’ˆçš„æ›¿ä»£æ–¹æ³•ï¼š

  * æ¯ç§åŠ¨ç‰©å†™å•ç‹¬å‡½æ•°è°ƒç”¨ï¼Œæ²¡æœ‰ç»Ÿä¸€æŽ¥å£
  * ç¼ºç‚¹ï¼šå¢žåŠ å¯¹è±¡ç±»åž‹æ—¶éœ€è¦æ”¹è°ƒç”¨ä»£ç ï¼Œæ‰©å±•æ€§å·®

---

## 4-æ‹“å±•åœºæ™¯

* æ’ä»¶æœºåˆ¶ / åŠ¨æ€åŠ è½½
* äº‹ä»¶é©±åŠ¨ç³»ç»Ÿï¼ˆGUIã€ç½‘ç»œï¼‰
* å‡½æ•°æŒ‡é’ˆæ•°ç»„ + å¾ªçŽ¯è¡¨ï¼ˆä»»åŠ¡è°ƒåº¦ã€å®šæ—¶å™¨ï¼‰
* ç®—æ³•å¯æ›¿æ¢ï¼ˆæŽ’åºã€æœç´¢ã€åŽ‹ç¼©ã€åŠ å¯†ç­‰ï¼‰

---

## 5-å‡½æ•°æŒ‡é’ˆ-æ€»ç»“

* æ ¸å¿ƒä½œç”¨ï¼šæŠŠå‡½æ•°å½“ä½œæ•°æ®ä¼ é€’ï¼Œè®©ç¨‹åºæ›´çµæ´»ã€å¯æ‰©å±•ã€å¯å¤ç”¨
* ä»€ä¹ˆæ—¶å€™ç”¨ï¼š

  * è¡Œä¸ºéœ€è¦åŠ¨æ€é€‰æ‹©
  * ç»Ÿä¸€æŽ¥å£ï¼Œä¸åŒå®žçŽ°
  * æé«˜æ‰©å±•æ€§å’Œå¯å¤ç”¨æ€§
* æ€è·¯ï¼šæŠŠå‡½æ•°åå½“ä½œâ€œæŒ‡é’ˆâ€ï¼Œå¯ä»¥å­˜å‚¨ã€ä¼ é€’ã€åŠ¨æ€è°ƒç”¨
* ä¸ç”¨å‡½æ•°æŒ‡é’ˆæ—¶ï¼š

  * æ¡ä»¶åˆ¤æ–­ç®€å•ç›´æŽ¥ï¼Œä½†æ‰©å±•æ€§å·®ã€ä»£ç é‡å¤å¤šã€æ•ˆçŽ‡ç¨ä½Ž

---

